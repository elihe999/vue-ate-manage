{"remainingRequest":"/home/vue-ate-manage/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vue-ate-manage/src/components/page/HistoryTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vue-ate-manage/src/components/page/HistoryTable.vue","mtime":1561432207629},{"path":"/home/vue-ate-manage/node_modules/cache-loader/dist/cjs.js","mtime":1561373434456},{"path":"/home/vue-ate-manage/node_modules/babel-loader/lib/index.js","mtime":1561373435744},{"path":"/home/vue-ate-manage/node_modules/cache-loader/dist/cjs.js","mtime":1561373434456},{"path":"/home/vue-ate-manage/node_modules/vue-loader/lib/index.js","mtime":1561373433096}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: 'basetable',\n    data() {\n        return {\n            url: '/index.php/ReturnView/get_page_class/case/',\n            tableData: [],\n            cur_page: 1,\n            multipleSelection: [],\n            select_cate: 'case',\n            select_word: '',\n            del_list: [],\n            is_search: false,\n            editVisible: false,\n            delVisible: false,\n            form: {\n                name: '',\n                date: '',\n                pass: '',\n            },\n            idx: -1,\n            total: 100\n        }\n    },\n    created() {\n        this.getData()\n        this.getPage()\n    },\n    computed: {\n        data() {\n            return this.tableData.filter((d) => {\n                let is_del = false;\n                for (let i = 0; i < this.del_list.length; i++) {\n                    if (d.name === this.del_list[i].name) {\n                        is_del = true;\n                        break;\n                    }\n                }\n                if (!is_del) {\n                    if (d.name.indexOf(this.select_cate) > -1 &&\n                        (d.name.indexOf(this.select_word) > -1 ||\n                            d.name.indexOf(this.select_word) > -1)\n                    ) {\n                        return d;\n                    }\n                }\n            })\n        }\n    },\n    methods: {\n        // 分页导航\n        handleCurrentChange(val) {\n            this.cur_page = val;\n            this.getData();\n        },\n        // 获取 easy-mock 的模拟数据\n        getData() {\n            // 开发环境使用 easy-mock 数据，正式环境使用 json 文件\n            if (process.env.NODE_ENV === 'development') {\n                this.url = 'https://www.easy-mock.com/mock/5cfdf3b46b3bca3c744e7543/example/get/casename';\n            } else {\n                this.url = this.url + localStorage.getItem('ms_username') + \"/\" + this.cur_page + \"/10\" + \"/path\" + \"/0\";\n            };\n            this.$axios.get(this.url).then((res) => {\n                this.tableData = res.data.list;\n            })\n        },\n        search() {\n            this.is_search = true;\n        },\n        filterTag(value, row) {\n            return row.tag === value;\n        },\n        handleEdit(index, row) {\n            this.idx = index;\n            const item = this.tableData[index];\n            this.form = {\n                name: item.name,\n                date: item.date,\n            }\n            this.editVisible = true;\n        },\n        handleDelete(index, row) {\n            this.idx = index;\n            this.delVisible = true;\n        },\n        delAll() {\n            const length = this.multipleSelection.length;\n            let str = '';\n            this.del_list = this.del_list.concat(this.multipleSelection);\n            for (let i = 0; i < length; i++) {\n                str += this.multipleSelection[i].name + ' ';\n            }\n            this.$message.error('删除了' + str);\n            this.multipleSelection = [];\n        },\n        handleSelectionChange(val) {\n            this.multipleSelection = val;\n        },\n        // 保存编辑\n        saveEdit() {\n            this.$set(this.tableData, this.idx, this.form);\n            this.editVisible = false;\n            this.$message.success(`修改第 ${this.idx+1} 行成功`);\n        },\n        // 确定删除\n        deleteRow() {\n            this.tableData.splice(this.idx, 1);\n            this.$message.success('删除成功');\n            this.delVisible = false;\n        },\n        // Show Data Table\n        goData(index, row) {\n            // console.log(index)\n            // console.log(row)\n            this.$router.push({name: 'data', path: '/data', query: { \n                suite: row.path, name: row.name\n                }\n            })\n        },\n        getPage() {\n            this.url = \"/index.php/ReturnView/pagination/case/\" + localStorage.getItem('ms_username');\n            console.log(localStorage.getItem('ms_username'));\n            this.$axios.get(this.url).then((res) => {\n                this.total = res.data.number;\n                console.log(res.data);\n            })\n        }\n    }\n}\n\n",{"version":3,"sources":["HistoryTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HistoryTable.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n    <div class=\"table\">\r\n        <div class=\"crumbs\">\r\n            <el-breadcrumb separator=\"/\">\r\n                <el-breadcrumb-item><i class=\"el-icon-lx-cascades\"></i> 基础表格</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"handle-box\">\r\n                <el-button type=\"primary\" icon=\"delete\" class=\"handle-del mr10\" @click=\"delAll\">批量删除</el-button>\r\n                <!-- <el-select v-model=\"select_cate\" placeholder=\"Data type\" class=\"handle-select mr10\">\r\n                    <el-option key=\"1\" label=\"Case\" value=\"case\"></el-option>\r\n                    <el-option key=\"2\" label=\"Suite\" value=\"suite\"></el-option>\r\n                </el-select> -->\r\n                <el-input v-model=\"select_word\" placeholder=\"筛选关键词\" class=\"handle-input mr10\"></el-input>\r\n                <el-button type=\"primary\" icon=\"search\" @click=\"search\">搜索</el-button>\r\n            </div>\r\n            <el-table :data=\"tableData\" border class=\"table\" ref=\"multipleTable\" @selection-change=\"handleSelectionChange\">\r\n                <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\r\n                <el-table-column prop=\"date\" label=\"Date\" sortable width=\"150\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"name\" label=\"Name\" sortable >\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"text\" @click=\"goData(scope.$index, scope.row)\" >{{ scope.row.name }}</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"path\" label=\"Suite\" sortable width=\"160\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"time\" label=\"Time\" sortable width=\"130\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"numc\" label=\"Suite NO.\" sortable width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"loopc\" label=\"Case NO.\" sortable width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"result\" label=\"Result\" sortable width=\"120\">\r\n                </el-table-column>\r\n                <el-table-column label=\"操作\" width=\"180\" align=\"center\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button type=\"text\" icon=\"el-icon-delete\" class=\"red\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <div class=\"pagination\">\r\n                <el-pagination background @current-change=\"handleCurrentChange\" layout=\"prev, pager, next\" :total=total>\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n<!-- \r\n        <el-dialog title=\"编辑\" :visible.sync=\"editVisible\" width=\"30%\">\r\n            <el-form ref=\"form\" :model=\"form\" label-width=\"50px\">\r\n                <el-form-item label=\"日期\">\r\n                    <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"form.date\" value-format=\"yyyy-MM-dd\" style=\"width: 100%;\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item label=\"姓名\">\r\n                    <el-input v-model=\"form.name\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"editVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"saveEdit\">确 定</el-button>\r\n            </span>\r\n        </el-dialog> -->\r\n\r\n        <!-- 删除提示框 -->\r\n        <el-dialog title=\"提示\" :visible.sync=\"delVisible\" width=\"300px\" center>\r\n            <div class=\"del-dialog-cnt\">删除不可恢复，是否确定删除？</div>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"delVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"deleteRow\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'basetable',\r\n        data() {\r\n            return {\r\n                url: '/index.php/ReturnView/get_page_class/case/',\r\n                tableData: [],\r\n                cur_page: 1,\r\n                multipleSelection: [],\r\n                select_cate: 'case',\r\n                select_word: '',\r\n                del_list: [],\r\n                is_search: false,\r\n                editVisible: false,\r\n                delVisible: false,\r\n                form: {\r\n                    name: '',\r\n                    date: '',\r\n                    pass: '',\r\n                },\r\n                idx: -1,\r\n                total: 100\r\n            }\r\n        },\r\n        created() {\r\n            this.getData()\r\n            this.getPage()\r\n        },\r\n        computed: {\r\n            data() {\r\n                return this.tableData.filter((d) => {\r\n                    let is_del = false;\r\n                    for (let i = 0; i < this.del_list.length; i++) {\r\n                        if (d.name === this.del_list[i].name) {\r\n                            is_del = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!is_del) {\r\n                        if (d.name.indexOf(this.select_cate) > -1 &&\r\n                            (d.name.indexOf(this.select_word) > -1 ||\r\n                                d.name.indexOf(this.select_word) > -1)\r\n                        ) {\r\n                            return d;\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        methods: {\r\n            // 分页导航\r\n            handleCurrentChange(val) {\r\n                this.cur_page = val;\r\n                this.getData();\r\n            },\r\n            // 获取 easy-mock 的模拟数据\r\n            getData() {\r\n                // 开发环境使用 easy-mock 数据，正式环境使用 json 文件\r\n                if (process.env.NODE_ENV === 'development') {\r\n                    this.url = 'https://www.easy-mock.com/mock/5cfdf3b46b3bca3c744e7543/example/get/casename';\r\n                } else {\r\n                    this.url = this.url + localStorage.getItem('ms_username') + \"/\" + this.cur_page + \"/10\" + \"/path\" + \"/0\";\r\n                };\r\n                this.$axios.get(this.url).then((res) => {\r\n                    this.tableData = res.data.list;\r\n                })\r\n            },\r\n            search() {\r\n                this.is_search = true;\r\n            },\r\n            filterTag(value, row) {\r\n                return row.tag === value;\r\n            },\r\n            handleEdit(index, row) {\r\n                this.idx = index;\r\n                const item = this.tableData[index];\r\n                this.form = {\r\n                    name: item.name,\r\n                    date: item.date,\r\n                }\r\n                this.editVisible = true;\r\n            },\r\n            handleDelete(index, row) {\r\n                this.idx = index;\r\n                this.delVisible = true;\r\n            },\r\n            delAll() {\r\n                const length = this.multipleSelection.length;\r\n                let str = '';\r\n                this.del_list = this.del_list.concat(this.multipleSelection);\r\n                for (let i = 0; i < length; i++) {\r\n                    str += this.multipleSelection[i].name + ' ';\r\n                }\r\n                this.$message.error('删除了' + str);\r\n                this.multipleSelection = [];\r\n            },\r\n            handleSelectionChange(val) {\r\n                this.multipleSelection = val;\r\n            },\r\n            // 保存编辑\r\n            saveEdit() {\r\n                this.$set(this.tableData, this.idx, this.form);\r\n                this.editVisible = false;\r\n                this.$message.success(`修改第 ${this.idx+1} 行成功`);\r\n            },\r\n            // 确定删除\r\n            deleteRow() {\r\n                this.tableData.splice(this.idx, 1);\r\n                this.$message.success('删除成功');\r\n                this.delVisible = false;\r\n            },\r\n            // Show Data Table\r\n            goData(index, row) {\r\n                // console.log(index)\r\n                // console.log(row)\r\n                this.$router.push({name: 'data', path: '/data', query: { \r\n                    suite: row.path, name: row.name\r\n                    }\r\n                })\r\n            },\r\n            getPage() {\r\n                this.url = \"/index.php/ReturnView/pagination/case/\" + localStorage.getItem('ms_username');\r\n                console.log(localStorage.getItem('ms_username'));\r\n                this.$axios.get(this.url).then((res) => {\r\n                    this.total = res.data.number;\r\n                    console.log(res.data);\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .handle-box {\r\n        margin-bottom: 20px;\r\n    }\r\n\r\n    .handle-select {\r\n        width: 120px;\r\n    }\r\n\r\n    .handle-input {\r\n        width: 300px;\r\n        display: inline-block;\r\n    }\r\n    .del-dialog-cnt{\r\n        font-size: 16px;\r\n        text-align: center\r\n    }\r\n    .table{\r\n        width: 100%;\r\n        font-size: 14px;\r\n    }\r\n    .red{\r\n        color: #ff0000;\r\n    }\r\n    .mr10{\r\n        margin-right: 10px;\r\n    }\r\n</style>\r\n"]}]}