{"remainingRequest":"/home/eligit2/vue-manage-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/eligit2/vue-manage-system/src/components/page/BaseTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/eligit2/vue-manage-system/src/components/page/BaseTable.vue","mtime":1560137050891},{"path":"/home/eligit2/vue-manage-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eligit2/vue-manage-system/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eligit2/vue-manage-system/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/eligit2/vue-manage-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/eligit2/vue-manage-system/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    name: 'basetable',\n    data() {\n        return {\n            url: './vuetable.json',\n            tableData: [],\n            cur_page: 1,\n            multipleSelection: [],\n            select_cate: '',\n            select_word: '',\n            del_list: [],\n            is_search: false,\n            editVisible: false,\n            delVisible: false,\n            form: {\n                name: '',\n                date: '',\n                address: ''\n            },\n            idx: -1\n        }\n    },\n    created() {\n        this.getData();\n    },\n    computed: {\n        data() {\n            return this.tableData.filter((d) => {\n                let is_del = false;\n                for (let i = 0; i < this.del_list.length; i++) {\n                    if (d.name === this.del_list[i].name) {\n                        is_del = true;\n                        break;\n                    }\n                }\n                if (!is_del) {\n                    if (d.address.indexOf(this.select_cate) > -1 &&\n                        (d.name.indexOf(this.select_word) > -1 ||\n                            d.address.indexOf(this.select_word) > -1)\n                    ) {\n                        return d;\n                    }\n                }\n            })\n        }\n    },\n    methods: {\n        // 分页导航\n        handleCurrentChange(val) {\n            this.cur_page = val;\n            this.getData();\n        },\n        // 获取 easy-mock 的模拟数据\n        getData() {\n            // 开发环境使用 easy-mock 数据，正式环境使用 json 文件\n            if (process.env.NODE_ENV === 'development') {\n                this.url = '/ms/table/list';\n            };\n            this.$axios.post(this.url, {\n                page: this.cur_page\n            }).then((res) => {\n                this.tableData = res.data.list;\n            })\n        },\n        search() {\n            this.is_search = true;\n        },\n        formatter(row, column) {\n            return row.address;\n        },\n        filterTag(value, row) {\n            return row.tag === value;\n        },\n        handleEdit(index, row) {\n            this.idx = index;\n            const item = this.tableData[index];\n            this.form = {\n                name: item.name,\n                date: item.date,\n                address: item.address\n            }\n            this.editVisible = true;\n        },\n        handleDelete(index, row) {\n            this.idx = index;\n            this.delVisible = true;\n        },\n        delAll() {\n            const length = this.multipleSelection.length;\n            let str = '';\n            this.del_list = this.del_list.concat(this.multipleSelection);\n            for (let i = 0; i < length; i++) {\n                str += this.multipleSelection[i].name + ' ';\n            }\n            this.$message.error('删除了' + str);\n            this.multipleSelection = [];\n        },\n        handleSelectionChange(val) {\n            this.multipleSelection = val;\n        },\n        // 保存编辑\n        saveEdit() {\n            this.$set(this.tableData, this.idx, this.form);\n            this.editVisible = false;\n            this.$message.success(`修改第 ${this.idx+1} 行成功`);\n        },\n        // 确定删除\n        deleteRow(){\n            this.tableData.splice(this.idx, 1);\n            this.$message.success('删除成功');\n            this.delVisible = false;\n        }\n    }\n}\n\n",null]}