{"remainingRequest":"/home/vue-manage-system/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vue-manage-system/src/components/page/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vue-manage-system/src/components/page/Dashboard.vue","mtime":1560391803051},{"path":"/home/vue-manage-system/node_modules/cache-loader/dist/cjs.js","mtime":1560391811095},{"path":"/home/vue-manage-system/node_modules/thread-loader/dist/cjs.js","mtime":1560391811807},{"path":"/home/vue-manage-system/node_modules/babel-loader/lib/index.js","mtime":1560391814199},{"path":"/home/vue-manage-system/node_modules/cache-loader/dist/cjs.js","mtime":1560391811095},{"path":"/home/vue-manage-system/node_modules/vue-loader/lib/index.js","mtime":1560391807211}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Schart from 'vue-schart';\nimport bus from '../common/bus';\nexport default {\n    name: 'dashboard',\n    data() {\n        return {\n            name: localStorage.getItem('ms_username'),\n            todoList: [{\n                    title: '今天要修复100个bug',\n                    status: false,\n                }\n            ],\n            data: [],\n            data1: [],\n            options: {\n                title: 'Failed case over past seven days',\n                showValue: false,\n                fillColor: 'red',\n                bottomPadding: 30,\n                topPadding: 30\n            },\n            options2: {\n                title: 'Past seven days suite',\n                fillColor: '#FC6FA1',\n                axisColor: '#008ACD',\n                contentColor: '#EEEEEE',\n                bgColor: '#F5F8FD',\n                bottomPadding: 30,\n                topPadding: 30\n            },\n            url: ''\n        }\n    },\n    components: {\n        Schart\n    },\n    computed: {\n        role() {\n            return this.name === 'admin' ? '超级管理员' : '普通用户';\n        }\n    },\n    created(){\n        this.handleListener();\n        this.getData();\n    },\n    activated(){\n        this.handleListener();\n    },\n    deactivated(){\n        window.removeEventListener('resize', this.renderChart);\n        bus.$off('collapse', this.handleBus);\n    },\n    methods: {\n        handleListener(){\n            bus.$on('collapse', this.handleBus);\n            // 调用renderChart方法对图表进行重新渲染\n            window.addEventListener('resize', this.renderChart)\n        },\n        handleBus(msg){\n            setTimeout(() => {\n                this.renderChart()\n            }, 300);\n        },\n        renderChart(){\n            this.$refs.bar.renderChart();\n            this.$refs.line.renderChart();\n        },\n        getData() {\n            this.url = \"/index.php/Welcome/simplechart\"\n            this.$axios.post(this.url).then((res) => {\n                let temp = []\n                let temp_suite = []\n                res.data.list.forEach(function(currentValue) {\n                    let timeObj = new Date(parseInt(currentValue['time']) * 1000)\n                    let year = timeObj.getFullYear()\n                    let mouth = timeObj.getMonth() + 1\n                    let day = timeObj.getDate()\n                    let temp_time = year + '/' + mouth + '/' + day\n                    temp.push({'value':currentValue['failnum'],'name':temp_time})\n                    temp_suite.push({'value':currentValue['totalnum'],'name':temp_time})\n                })\n                this.data = temp\n                this.data1 = temp_suite\n            })\n        }\n    }\n}\n\n",null]}